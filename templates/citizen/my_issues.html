<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>My Issues | CivicFix</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/core.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
  <script src="{{ url_for('static', filename='js/ui-enhancements.js') }}" defer></script>
</head>

<body>

  {% include "citizen/navbar.html" %}

  <div class="page-header">
    <h2>ğŸ“‹ My Reported Issues</h2>
    <p>Track the status of all issues you've reported</p>
  </div>

  {% if issues|length == 0 %}
  <div class="feed-container">
    <div class="card empty-card empty-state">
      <h3 class="empty-title">You haven't reported any issues yet</h3>
      <p class="empty-body mb-3">Help your community by reporting civic problems</p>
      <a href="/citizen/report" class="primary-btn">Report Your First Issue</a>
    </div>
  </div>
  {% else %}
  <div class="feed-container">
    {% for i in issues %}
    <div class="card feed-card">

      <div class="issue-header">
        <h3>{{ i[0] }}</h3>
        <span class="status {{ i[3]|lower|replace(' ', '-') }}">{{ i[3] }}</span>
      </div>

      <!-- Always display image container for consistent card height -->
      <div class="issue-image-container">
        {% if i[4] %}
        <img src="{{ url_for('static', filename='uploads/' + i[4]) }}" alt="Issue image" class="issue-image">
        {% else %}
        <div class="image-placeholder">
          <span>ğŸ“·</span>
          <p>No image</p>
        </div>
        {% endif %}
      </div>

      <div class="issue-meta">
        <div class="meta-item">
          <span class="meta-label">ğŸ“ Location</span>
          <span class="meta-value">{{ i[1] }}</span>
        </div>

        <div class="meta-item">
          <span class="meta-label">âš ï¸ Priority</span>
          <span class="meta-value priority {{ i[2]|lower }}">{{ i[2] }}</span>
        </div>

        <div class="meta-item">
          <span class="meta-label">ğŸ“Š Status</span>
          <span class="meta-value">{{ i[3] }}</span>
        </div>
      </div>

    </div>
    {% endfor %}
  </div>
  {% endif %}

  {% include "citizen/footer.html" %}

</body>

</html>
